#!/usr/bin/env bash

# ============================================================
# VpsScriptKit 启动包装器
# 作用：解析软链接真实路径，并导出 BASE_DIR 环境供全局使用
# ============================================================

# 获取当前脚本的真实物理路径
REAL_PATH=$(readlink -f "$0")

# 获取当前脚本的绝对真实路径路径，并推导出项目根目录 (bin 的上一级)
export BASE_DIR="$(cd "$(dirname "$REAL_PATH")/.." && pwd)"

# 执行主入口，并传递所有参数 ($@)
# 使用 exec 可以让 main.sh 接管当前进程，更加高效
if [ -f "$BASE_DIR/core/main.sh" ]; then
    exec "$BASE_DIR/core/main.sh" "$@"
else
    echo "错误: 未找到主程序入口 $BASE_DIR/core/main.sh"
    exit 1
fi
