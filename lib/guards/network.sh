#!/usr/bin/env bash

# ==============================================================================
# VpsScriptKit - 网络状态检测
#
# @文件路径: lib/guards/network.sh
# @功能描述: 网络状态检测
#
# @作者: Jamison
# @版本: 0.1.0
# @创建日期: 2026-01-12
# ==============================================================================

# ******************************************************************************
# 网络状态检测（偏 check）
# ******************************************************************************

# ------------------------------------------------------------------------------
# 函数名: check_net_connectivity
# 功能:   仅检测连通性，不输出任何文字 (Silent Check)
# 
# 参数:
#   无
# 
# 返回值:
#   0: 通
#   1: 不通
# 
# 示例:
#   check_net_connectivity
# ------------------------------------------------------------------------------
check_net_connectivity() {
    # 尝试 ping 谷歌 DNS，超时 1 秒
    ping -c 1 -W 1 8.8.8.8 >/dev/null 2>&1
}

# ------------------------------------------------------------------------------
# 函数名: get_net_status_text
# 功能:   获取带有颜色的状态文本 (用于状态栏/面板显示)
# ------------------------------------------------------------------------------
get_net_status_text() {
    if check_net_connectivity; then
        echo "${GREEN}正常${NC}"
    else
        echo "${RED}异常${NC}"
    fi
}
