## 目录结构设计

```bash
VpsScriptKit/
├── config/                      # [配置] 用户配置文件
│   └── app.conf
├── lib/                         # [核心库] 存放所有通用函数/核心逻辑
│   ├── env.sh                   # [定] 全局环境变量与常量配置
│   ├── color.sh                 # [定] 全局颜色变量
│   ├── ui.sh                    # [画] 负责 “画” (UI 渲染、菜单项、颜色、间距...)
│   ├── interact.sh              # [问] 负责 “问” (确认框、输入框、等待按键)...
│   ├── check.sh                 # [查] 负责 “查” (环境检测、软件检测、依赖安装...)【抽取辅助函数脚本】
│   ├── utils.sh                 # [算] 负责 “算” (字符串处理、路径计算、数学运算)【抽取辅助函数脚本】
│   ├── router.sh                # [工具] 路由分发逻辑
│   ├── network.sh               # [工具] 网络信息
│   ├── geo.sh                   # [工具] ISP / 地理位置
│   ├── os.sh                    # [工具] 系统信息与发行版识别
│   ├── package.sh               # [工具] 包管理
│   ├── system.sh                # 
│   ├── system_mem.sh            # [工具] 系统内存获取模块
│   └── guard/                   # [辅助脚本] 统一入口
│        ├── check.sh            # 检查 + 提示（不修复）
│        ├── require.sh          # 强制满足（会修复）
│        ├── ensure.sh           # 尝试安装保障（可失败）
│        ├── memory.sh           # 内存 / Swap 状态辅助显示模块
│        └── network.sh          # 网络状态检测
├── modules/                     # [业务模块] 具体功能实现
│   ├── advanced/                # 3. 进阶工具
│   │   ├── menu.sh              # 菜单
│   │   └── dockter_agent/       # DockTer Agent 模块
│   │        └── install.sh      # 核心逻辑
│   │
│   ├── basic/                   # 2. 基础工具
│   │   ├── menu.sh              # 菜单
│   │   ├── installer/           # --> 基础软件安装 - 子模块
│   │   │   └── installer.sh     # 
│   │   │
│   │   ├── tmux/                # --> Tmux 管理 - 子模块
│   │   │   └── tmux.sh          # 
│   │   └── README.md            # 一些说明
│   │
│   ├── docker/                  # 4. Docker 管理
│   │   ├── menu.sh              # 菜单
│   │   ├── install.sh           # 安装
│   │   └── uninstall.sh         # 卸载
│   │
│   │── node/                    # 9. 节点搭建工具
│   │   ├── menu.sh              # 菜单
│   │   ├── 3xui/                # 3x-ui 独立模块
│   │   │   └── 3xui.sh          # 
│   │   └── xui/                 # x-ui 独立模块
│   │       └── xui.sh           # 
│   │
│   ├── system/                  # 1. 系统工具
│   │   ├── menu.sh              # 系统菜单
│   │   ├── README.md            # 一些说明
│   │   │
│   │   ├── firewall/            # --> 防火墙 - 子模块
│   │   │   ├── geoip.sh         # TODO 待补充
│   │   │   └── ...
│   │   │
│   │   ├── maintain/            # --> 维护中心 - 子模块
│   │   │   ├── menu.sh          # 菜单
│   │   │   ├── reinstall.sh     # [重装] 一键重装脚本
│   │   │   ├── uninstall.sh     # [卸载] 一键卸载脚本
│   │   │   └── update.sh        # [更新] 一键更新脚本
│   │   │
│   │   ├── memory/              # --> Swap - 子模块
│   │   │   ├── menu.sh          # 菜单
│   │   │   └── swap.sh          # 管理核心逻辑
│   │   │
│   │   ├── reinstall/           # --> 重装系统 - 子模块
│   │   │   ├── menu.sh          # 菜单
│   │   │   ├── reinstall.sh     # 
│   │   │   └── README.md        # 一些说明
│   │   │
│   │   ├── system/              # --> 系统展示 - 子模块
│   │   │   ├── clean.sh         # 
│   │   │   ├── status.sh        # 
│   │   │   └── update.sh        # 更新系统
│   │   │
│   │   ├── security/                # 安全 / 权限 / 登录相关（高风险）【新增】
│   │   │   ├── menu.sh              # 安全子菜单（将来一定用得上）【新增】
│   │   │   ├── change_password.sh   # 修改登录密码【新增】
│   │   │   ├── enable_root_login.sh # 开启 ROOT 密码登录【新增】
│   │   │   └── disable_user_add.sh  # 禁用 ROOT 创建新账户【新增】
│   │   │
│   │   ├── network/                 # 网络 / 端口 / SSH【新增】
│   │   │   ├── menu.sh
│   │   │   ├── open_all_ports.sh    # 开放所有端口【新增】
│   │   │   ├── change_ssh_port.sh   # 修改 SSH 端口【新增】
│   │   │   └── dns_optimize.sh      # 优化 DNS【新增】
│   │   │
│   ├── test/                    # 8. 测试脚本工具
│   │   ├── menu.sh              # 菜单
│   │   └── README.md            # 一些说明
├── banner                       # [logo] ASCII Art 字符画 Logo
├── install.sh                   # [安装] 一键安装/更新脚本
├── main.sh                      # [入口] 程序主入口
├── README.md                    # [介绍] 项目介绍
├── v                            # [快捷] 启动脚本 -> v
└── version                      # [配置] 版本号文件
```

## 标准文件头部注释 (File Header)

```bash
#!/usr/bin/env bash

# ==============================================================================
# VpsScriptKit - [模块中文名称]
#
# @文件路径: [相对路径]
# @功能描述: [一句话描述功能]
# @项目地址: [如果是第三方]
#
# @作者: Jamison
# @版本: 1.0.0
# @创建日期: 2026-01-09
# ==============================================================================
```

例如:

```bash
#!/usr/bin/env bash

# ==============================================================================
# VpsScriptKit - 3x-ui 面板管理模块
# 
# @文件路径: modules/node/3xui/3xui.sh
# @功能描述: 负责 3x-ui 面板的一键安装
# @项目地址: https://github.com/mhsanaei/3x-ui
# 
# @作者:    Jamison
# @版本:    1.0.0
# @创建日期: 2026-01-09
# ==============================================================================
```

## 标准函数注释 (Function Docs)

```bash
# ------------------------------------------------------------------------------
# 函数名: [函数英文名]
# 功能:   [一句话描述函数做什么]
# 
# 参数:
#   $1 ([类型]): [描述参数1的含义] (可选/必填)
#   $2 ([类型]): [描述参数2的含义]
# 
# 返回值:
#   0 - [成功时的含义]
#   1 - [失败时的含义]
# 
# 示例:
#   [function_name] "param1" "param2"
# ------------------------------------------------------------------------------
```

例如:

```bash
# ------------------------------------------------------------------------------
# 函数名: install_3xui_logic
# 功能: 执行 3x-ui 官方脚本安装逻辑
# # 参数:
#   无
# 返回: 0 (安装完成), 1 (用户取消或失败)
# ------------------------------------------------------------------------------
install_3xui_logic() {
    # ...
}
```

## 分类注释

```bash
# ******************************************************************************
# 描述
# ******************************************************************************
```

## 函数内单说明

```bash
# ------------------------------
# 描述
# ------------------------------
```

## 函数命名方式

| 职责 | 前缀 | 示例 |
| :-- | :-- | :-- |
| 判断 / 无副作用 | `is_` / `has_` | `is_root` / `has_cmd` |
| 检查 + 提示 | `check_` | `check_root` / `check_cmd` |
| 强制满足 | `require_` | `require_cmd` |
| 尝试保障 | `ensure_` | `ensure_network` |
| 能力判断 | `supports_` | `supports_systemd` |

# ******************************************************************************
# 是不是 → is_
# 有没有 → has_
# 支不支持 → supports_
# 能不能做 → can_
# 获取事实 → get_ / detect_
# ******************************************************************************